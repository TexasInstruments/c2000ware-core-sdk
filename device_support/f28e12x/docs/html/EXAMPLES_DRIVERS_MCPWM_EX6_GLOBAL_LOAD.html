<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>F28E12x Driverib and Example User Guide: MCPWM Global Load Use Case Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="F28E12x Driverib and Example User Guide"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F28E12x Driverib and Example User Guide
   &#160;<span id="projectnumber">6.00.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_DRIVERS_MCPWM_EX6_GLOBAL_LOAD.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MCPWM Global Load Use Case Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md381">Introduction</a><ul><li class="level2"><a href="#autotoc_md382">Global Load Feature</a><ul><li class="level3"><a href="#autotoc_md383">Key aspects include:</a></li>
<li class="level3"><a href="#autotoc_md384">Global Load Features</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md385">Example Overview</a><ul><li class="level2"><a href="#autotoc_md386">Module Configurations</a><ul><li class="level3"><a href="#autotoc_md387">myMCPWM0</a></li>
<li class="level3"><a href="#autotoc_md388">myMCPWM1</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md389">Global Load Implementation</a><ul><li class="level3"><a href="#autotoc_md390">Parameter Updates</a></li>
<li class="level3"><a href="#autotoc_md391">Update Process</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md392">External Connections</a></li>
<li class="level1"><a href="#autotoc_md393">Important Notes</a></li>
<li class="level1"><a href="#autotoc_md394">Steps to Run the Example</a></li>
<li class="level1"><a href="#autotoc_md395">Sample Output</a></li>
<li class="level1"><a href="#autotoc_md396">See Also</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md__home_siddharth_ti_repos_c29_sdk_docs_docs_src_docs_api_guide_examples_drivers_mcpwm_ex6_global_load_use_case"></a></p>
<h1><a class="anchor" id="autotoc_md381"></a>
Introduction</h1>
<h2><a class="anchor" id="autotoc_md382"></a>
Global Load Feature</h2>
<p>Global load is an advanced MCPWM feature that enables synchronized updates of multiple PWM parameters across different channels. This ensures smooth transitions and maintains phase relationships when modifying PWM settings during operation.</p>
<p>The feature operates by controlling transfers from shadow to active registers (GLDCTL[GLD]), synchronizing updates based on configured events (GLDCTL[GLDMODE]). When enabled, it overrides individual shadow register load settings for coordinated updates.</p>
<h3><a class="anchor" id="autotoc_md383"></a>
Key aspects include:</h3>
<p><b>One-Shot Load Operations</b></p><ul>
<li>Global Load Enable/Disable Control:<ul>
<li><a class="el" href="group__mcpwm__api.html#ga9639cbfe441bc402639e0d6f1191e547">MCPWM_enableGlobalLoad()</a></li>
<li><a class="el" href="group__mcpwm__api.html#gacd783d079fccce2070b0f8c64906a826">MCPWM_disableGlobalLoad()</a></li>
</ul>
</li>
<li>Global Load Trigger Configuration:<ul>
<li><a class="el" href="group__mcpwm__api.html#ga00890af8b530814127fc3e48f772aca8">MCPWM_setGlobalLoadTrigger()</a></li>
</ul>
</li>
<li>One-Shot Mode Control:<ul>
<li><a class="el" href="group__mcpwm__api.html#ga11166de298f9667711901b7a28c6cda1">MCPWM_enableGlobalLoadOneShotMode()</a></li>
<li><a class="el" href="group__mcpwm__api.html#ga8967719932fcdc0ad5330f8ed8dbe4ea">MCPWM_disableGlobalLoadOneShotMode()</a></li>
<li><a class="el" href="group__mcpwm__api.html#ga880adfd2d6d1e6b86fb033915cbb1bcc">MCPWM_setGlobalLoadOneShotLatch()</a></li>
<li><a class="el" href="group__mcpwm__api.html#gac1b22ec0a0a3000d4ea3a6b784a0f828">MCPWM_clearGlobalLoadOneShotLatch()</a></li>
</ul>
</li>
<li>One-Shot Status and Force Control:<ul>
<li><a class="el" href="group__mcpwm__api.html#gaa32111efa136e528e435fdf58f9e6ffd">MCPWM_getGlobalLoadOneShotLatchStatus()</a></li>
<li><a class="el" href="group__mcpwm__api.html#ga971fb93cc81624394628e404d6a27b27">MCPWM_forceGlobalLoadOneShotEvent()</a></li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>When global load is enabled, these shadow load mode settings are overridden by the global load trigger events.</dd></dl>
<h3><a class="anchor" id="autotoc_md384"></a>
Global Load Features</h3>
<ul>
<li><b>Synchronized Updates</b><ul>
<li>Compare values</li>
<li>Action qualifier settings</li>
<li>Deadband parameters</li>
</ul>
</li>
<li><b>Multiple Update Modes</b><ul>
<li>One-shot updates</li>
<li>Forced Updates</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md385"></a>
Example Overview</h1>
<p>This example demonstrates synchronized parameter updates across myMCPWM0 and myMCPWM1 modules using the global load feature.</p>
<h2><a class="anchor" id="autotoc_md386"></a>
Module Configurations</h2>
<h3><a class="anchor" id="autotoc_md387"></a>
myMCPWM0</h3>
<ol type="1">
<li>Time Base Settings:<ul>
<li>Up Count Mode</li>
<li>40 kHz Frequency (3999 period @ 160MHz TBCLK)</li>
<li>Free Run emulation mode</li>
</ul>
</li>
<li>Initial Compare Values:<ul>
<li>PWM1A/B: 1800 (45% duty cycle)</li>
<li>PWM2A/B: 3133 (78% duty cycle)</li>
<li>PWM3A/B: 467 (12% duty cycle)</li>
</ul>
</li>
<li>Action Qualifier:<ul>
<li>All pairs set HIGH on Counter matches CMPA/CMPB counting up</li>
<li>All pairs set LOW on Counter Period</li>
</ul>
</li>
<li>Initial Deadband:<ul>
<li>32 counts (200ns @ 160MHz)</li>
<li>Both Rising and Falling edge delay enabled</li>
</ul>
</li>
</ol>
<h3><a class="anchor" id="autotoc_md388"></a>
myMCPWM1</h3>
<ol type="1">
<li>Time Base Settings:<ul>
<li>Up Count Mode synchronized to myMCPWM0</li>
<li>40 kHz Frequency (3999 period)</li>
</ul>
</li>
<li>Initial Compare Values:<ul>
<li>PWM1A/B: 1000 (25% duty cycle)</li>
</ul>
</li>
<li>Action Qualifier:<ul>
<li>PWM1A/B set HIGH on Counter matches CMPA/CMPB counting up</li>
<li>PWM1A/B set LOW on Counter Period</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md389"></a>
Global Load Implementation</h2>
<p>When perform_one_shot_load flag is set, the following synchronized updates occur:</p>
<h3><a class="anchor" id="autotoc_md390"></a>
Parameter Updates</h3>
<ol type="1">
<li>Compare Values:<ul>
<li>myMCPWM0:<ul>
<li>PWM1A: 2000 (50% duty)</li>
<li>PWM2A: 3333 (83% duty)</li>
<li>PWM3A: 667 (17% duty)</li>
</ul>
</li>
<li>myMCPWM1:<ul>
<li>PWM1A: 2000 (50% duty)</li>
</ul>
</li>
</ul>
</li>
<li>Deadband Parameters:<ul>
<li>Both modules updated to 48 counts (300ns @ 160MHz)</li>
<li>Applied to both rising and falling edges</li>
</ul>
</li>
</ol>
<h3><a class="anchor" id="autotoc_md391"></a>
Update Process</h3>
<ol type="1">
<li>New values written to shadow registers</li>
<li>Global load trigger synchronizes all updates</li>
<li>Changes take effect simultaneously on next global load event</li>
</ol>
<h1><a class="anchor" id="autotoc_md392"></a>
External Connections</h1>
<p>Monitor these PWM outputs on the LaunchPad:</p><ul>
<li>J4 40 - GPIO0 - myMCPWM0 Output A1</li>
<li>J4 39 - GPIO1 - myMCPWM0 Output B1</li>
<li>J4 38 - GPIO2 - myMCPWM0 Output A2</li>
<li>J4 37 - GPIO3 - myMCPWM0 Output B2</li>
<li>J4 36 - GPIO4 - myMCPWM0 Output A3</li>
<li>J4 35 - GPIO5 - myMCPWM0 Output B3</li>
<li>J1 7 - GPIO12 - myMCPWM1 Output A1</li>
<li>J2 19 - GPIO29 - myMCPWM1 Output B1</li>
</ul>
<h1><a class="anchor" id="autotoc_md393"></a>
Important Notes</h1>
<ul>
<li>Use an oscilloscope to observe synchronized updates</li>
<li>Watch deadband transitions on complementary pairs</li>
<li>All updates occur on the next global load event</li>
<li>Period remains constant during updates</li>
</ul>
<h1><a class="anchor" id="autotoc_md394"></a>
Steps to Run the Example</h1>
<ol type="1">
<li>Import and build the CCS project</li>
<li>Connect an oscilloscope to observe the specified GPIO pins</li>
<li>Launch a CCS debug session</li>
<li>Run the executable</li>
<li>Observe the synchronized parameter updates across all channels</li>
</ol>
<h1><a class="anchor" id="autotoc_md395"></a>
Sample Output</h1>
<p> <style>div.image img[src="mcpwm_ex6_global_load_use_case.png"]{width:50%}</style> </p><div class="image">
<img src="mcpwm_ex6_global_load_use_case.png" alt=""/>
<div class="caption">
Sample Output</div></div>
<h1><a class="anchor" id="autotoc_md396"></a>
See Also</h1>
<ul>
<li><a class="el" href="DRIVERS_MCPWM_PAGE.html">MCPWM</a></li>
<li><a class="el" href="EXAMPLES_DRIVERS_MCPWM_EX1_BASIC_PWM.html">MCPWM Basic PWM Generation Examples</a></li>
<li><a class="el" href="EXAMPLES_DRIVERS_MCPWM_EX2_SYNCHRONIZATION.html">MCPWM Synchronization Example</a></li>
<li><a class="el" href="EXAMPLES_DRIVERS_MCPWM_EX3_DEADBAND.html">MCPWM Deadband Example</a></li>
<li><a class="el" href="EXAMPLES_DRIVERS_MCPWM_EX5_TRIPZONE.html">MCPWM Tripzone Example</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
