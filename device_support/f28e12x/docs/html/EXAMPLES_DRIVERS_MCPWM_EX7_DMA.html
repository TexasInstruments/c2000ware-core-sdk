<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>F28E12x Driverib and Example User Guide: MCPWM Using DMA for Advanced PWM Generation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="F28E12x Driverib and Example User Guide"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F28E12x Driverib and Example User Guide
   &#160;<span id="projectnumber">6.00.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_DRIVERS_MCPWM_EX7_DMA.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MCPWM Using DMA for Advanced PWM Generation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md397">Example Overview</a><ul><li class="level2"><a href="#autotoc_md398">MCPWM Configuration</a></li>
<li class="level2"><a href="#autotoc_md399">DMA Configuration</a></li>
<li class="level2"><a href="#autotoc_md400">Key Features and Benefits</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md401">Implementation Details</a><ul><li class="level2"><a href="#autotoc_md402">DMA Configuration</a></li>
<li class="level2"><a href="#autotoc_md403">Memory Configuration</a></li>
<li class="level2"><a href="#autotoc_md404">PWM Signal Generation</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md405">External Connections</a></li>
<li class="level1"><a href="#autotoc_md406">Steps to Run the Example</a><ul><li class="level2"><a href="#autotoc_md407">Watch Variables</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md408">See Also</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md__home_siddharth_ti_repos_c29_sdk_docs_docs_src_docs_api_guide_examples_drivers_mcpwm_ex7_dma"></a></p>
<h1><a class="anchor" id="autotoc_md397"></a>
Example Overview</h1>
<p>This example demonstrates how to configure MCPWM modules and DMA controllers to implement dynamic updates of PWM parameters without CPU intervention. By utilizing DMA to automatically update PWM compare values, the system can generate complex PWM patterns without requiring CPU cycles for each update.</p>
<h2><a class="anchor" id="autotoc_md398"></a>
MCPWM Configuration</h2>
<ul>
<li>MCPWM0 and MCPWM1 are configured for PWM output generation</li>
<li>MCPWM0 provides SOC trigger for DMA CH1 operations</li>
<li>MCPWM1 provides SOC trigger for DMA CH2 operations</li>
</ul>
<h2><a class="anchor" id="autotoc_md399"></a>
DMA Configuration</h2>
<ul>
<li>DMA CH1 is configured to update MCPWM0 compare registers (PWM1-3 CMPAs) in burst mode, transferring 3 words per trigger</li>
<li>DMA CH2 is configured to update MCPWM1 compare registers (PWM1 CMPA) in burst mode, transferring 1 word per trigger</li>
<li>Both DMA channels operate continuously, cycling through 4 different configurations stored in memory</li>
<li>The example demonstrates advanced PWM pattern generation without CPU overhead by allowing DMA to dynamically update multiple PWM parameters on each PWM period</li>
</ul>
<h2><a class="anchor" id="autotoc_md400"></a>
Key Features and Benefits</h2>
<ul>
<li>Generates complex PWM patterns for motor control without CPU intervention</li>
<li>Demonstrates how to synchronize multiple MCPWM outputs through DMA operations</li>
</ul>
<h1><a class="anchor" id="autotoc_md401"></a>
Implementation Details</h1>
<h2><a class="anchor" id="autotoc_md402"></a>
DMA Configuration</h2>
<p>The example configures two DMA channels:</p>
<ol type="1">
<li><b>DMA Channel 1</b>:<ul>
<li>Source: Memory array <code>compareConfigs_6ch[]</code></li>
<li>Destination: MCPWM0 compare registers (PWM1-3 CMPAs)</li>
<li>Burst Size: 3 words (updating 3 compare values at once)</li>
<li>Trigger: MCPWM1 SOCA event</li>
<li>Mode: Continuous with 4 transfers (different configurations)</li>
</ul>
</li>
<li><b>DMA Channel 2</b>:<ul>
<li>Source: Memory array <code>compareConfigs_2ch[]</code></li>
<li>Destination: MCPWM1 compare registers (PWM1 CMPA)</li>
<li>Burst Size: 1 word</li>
<li>Trigger: MCPWM3 SOCA event</li>
<li>Mode: Continuous with 4 transfers (different configurations)</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md403"></a>
Memory Configuration</h2>
<p>Two configuration arrays are defined and placed in GSRAM for optimal DMA access:</p><ul>
<li><code>compareConfigs_6ch[]</code>: Contains 12 values (4 sets of 3) for MCPWM0 compare registers</li>
<li><code>compareConfigs_2ch[]</code>: Contains 4 values for MCPWM1 compare register</li>
</ul>
<h2><a class="anchor" id="autotoc_md404"></a>
PWM Signal Generation</h2>
<p>The DMA continuously updates the PWM compare values, which results in dynamically changing duty cycles across the PWM outputs. This creates a pattern of waveforms that would typically require significant CPU intervention to maintain.</p>
<h1><a class="anchor" id="autotoc_md405"></a>
External Connections</h1>
<p>Monitor the MCPWM pins for the waveforms:</p><ul>
<li>J4 40 - GPIO0 - myMCPWM0 Output A1</li>
<li>J4 39 - GPIO1 - myMCPWM0 Output B1</li>
<li>J4 38 - GPIO2 - myMCPWM0 Output A2</li>
<li>J4 37 - GPIO3 - myMCPWM0 Output B2</li>
<li>J4 36 - GPIO4 - myMCPWM0 Output A3</li>
<li>J4 35 - GPIO5 - myMCPWM0 Output B3</li>
<li>J4 7 - GPIO12 - myMCPWM1 Output A1</li>
<li>J2 19 - GPIO29 - myMCPWM1 Output B1</li>
</ul>
<h1><a class="anchor" id="autotoc_md406"></a>
Steps to Run the Example</h1>
<ul>
<li><b>When using CCS projects to build</b>, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">CCS Build Project</a>).</li>
<li>Establish connections as mentioned in External Connections section.</li>
<li>Launch a CCS debug session and run the executable, see <a class="el" href="CCS_LAUNCH_PAGE.html">Build, Load and Run</a></li>
<li>Using the watch variables, observe the waveforms.</li>
</ul>
<h2><a class="anchor" id="autotoc_md407"></a>
Watch Variables</h2>
<ul>
<li><code>compareConfigs_6ch[]</code> - Array containing MCPWM0 compare values for PWM1-3 CMPAs</li>
<li><code>compareConfigs_2ch[]</code> - Array containing MCPWM1 compare values for PWM1 CMPA</li>
</ul>
<h1><a class="anchor" id="autotoc_md408"></a>
See Also</h1>
<ul>
<li><a class="el" href="DRIVERS_MCPWM_PAGE.html">MCPWM</a></li>
<li><a class="el" href="DRIVERS_DMA_PAGE.html">DMA</a></li>
<li><a class="el" href="EXAMPLES_DRIVERS_MCPWM_EX1_BASIC_PWM.html">MCPWM Basic PWM Generation Examples</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
