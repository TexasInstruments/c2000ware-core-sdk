<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>F28E12x Driverib and Example User Guide: UART Internal Loopback with DMA</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="F28E12x Driverib and Example User Guide"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F28E12x Driverib and Example User Guide
   &#160;<span id="projectnumber">6.00.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_DRIVERS_UART_LOOPBACK_DMA.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">UART Internal Loopback with DMA </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md486">Introduction</a></li>
<li class="level1"><a href="#autotoc_md487">Watch  Variables</a></li>
<li class="level1"><a href="#autotoc_md488">External Connections</a></li>
<li class="level1"><a href="#autotoc_md489">Steps to Run the Example</a></li>
<li class="level1"><a href="#autotoc_md490">See Also</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md__home_siddharth_ti_repos_c29_sdk_docs_docs_src_docs_api_guide_examples_drivers_uart_loopback_dma"></a></p>
<h1><a class="anchor" id="autotoc_md486"></a>
Introduction</h1>
<p>This program uses the internal loopback test mode of the UART module. Two DMA interrupts and both of the UART FIFOs are used. Both DMA channels are configured to transfer BUFFER_SIZE words with each burst being UART_BUFFER_SIZE words. The configurations for the UART module and both DMA modules are done in the Sysconfig file.</p>
<dl class="section note"><dt>Note</dt><dd>Only the lower 8 bits of each word will be transmitted and received by the UART since the UART data register only has an 8-bit data field.</dd></dl>
<p>When the UART transmit FIFO has enough space (UART_BUFFER_SIZE bytes empty), the TX DMA will transfer data from the txData buffer in GSRAM memory into the transmit FIFO by writing to the UART data register. The data in the transmit FIFO will then be transmitted to the receive FIFO via the internal loopback.</p>
<p>When enough data has been placed in the receive FIFO (UART_BUFFER_SIZE data bytes full), the RX DMA will transfer the data from the receive FIFO into the rxData buffer in GSRAM memory by reading the UART data register.</p>
<dl class="section note"><dt>Note</dt><dd>This example implements the UART FIFO Buffers in NON Fine-Grained mode</dd></dl>
<p>When BUFFER_SIZE words have been placed into rxData, a check of the validity of the data will be performed and the errCount variable will indicate the amount of data mismatches between txData and rxData.</p>
<dl class="section note"><dt>Note</dt><dd>Avoid keeping the memory browser open while the execution is in progress.</dd></dl>
<h1><a class="anchor" id="autotoc_md487"></a>
Watch  Variables</h1>
<ul>
<li>txData : Data transmitted</li>
<li>rxData : Data received</li>
<li>errCount : Error count</li>
</ul>
<h1><a class="anchor" id="autotoc_md488"></a>
External Connections</h1>
<p>For external loopback, uncheck "Enable Loopback Mode" in Sysconfig myUART0 instance, and connect UARTA_TX and UARTA_RX</p><ul>
<li>UARTA_TX is on GPIO43</li>
<li>UARTA_RX is on GPIO32</li>
</ul>
<h1><a class="anchor" id="autotoc_md489"></a>
Steps to Run the Example</h1>
<ul>
<li><b>When using CCS projects to build</b>, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">CCS Build Project</a>).</li>
<li>Set BUFFER_SIZE to desired words of data to transfer. This value must be even numbered.</li>
<li>Set UART_BUFFER_SIZE to 2, 4, 8, 12 or 14. This value must divide evenly into the chosen BUFFER_SIZE.</li>
<li>Change "Burst Size" and "Transfer Size" settings in Sysconfig (for both myDMA0 and myDMA1) to reflect these values.<ul>
<li>Burst Size = UART_BUFFER_SIZE</li>
<li>Transfer Size = BUFFER_SIZE / UART_BUFFER_SIZE</li>
</ul>
</li>
<li>To use 32-bit words instead of 16-bit words, change:<ul>
<li>txData and rxData data types to uint32_t.</li>
<li>"Databus Width" setting in Sysconfig (for both myDMA0 and myDMA1) to "DMA
    transfers 32 bits at a time."</li>
<li>DMA0 "Source Address Burst Step" and "Source Address Transfer Step" in Sysconfig to 2.</li>
<li>DMA1 "Destination Address Burst Step" and "Destination Address Transfer
    Step" in Sysconfig to 2.</li>
</ul>
</li>
<li>Establish connections as mentioned in External Connections section.</li>
<li>Launch a CCS debug session and run the executable, see <a class="el" href="CCS_LAUNCH_PAGE.html">Build, Load and Run</a></li>
<li>Once DMA operations are complete and program hits ESTOP, inspect received data</li>
</ul>
<h1><a class="anchor" id="autotoc_md490"></a>
See Also</h1>
<p><a class="el" href="DRIVERS_UART_PAGE.html">UART</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
