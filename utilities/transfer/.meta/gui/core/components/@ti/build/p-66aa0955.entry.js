import{r as e,c as t,h as o,g as r}from"./p-823ca21f.js";import{GcUtils as i}from"../gc-core-assets/lib/GcUtils";import{GcFiles as n}from"../gc-core-assets/lib/GcFiles";import{GcConsole as a}from"../gc-core-assets/lib/GcConsole";import{W as s}from"./p-b29896ef.js";import"../gc-core-assets/lib/GcLocalStorage";import"../gc-widget-message-dialog/lib/GcMessageDialog";const c=':host::-webkit-scrollbar,::-webkit-scrollbar{width:var(--gc-scrollbar-width, var(--theme-scrollbar-width, 8px));height:var(--gc-scrollbar-width, var(--theme-scrollbar-width, 8px))}:host::-webkit-scrollbar-track,::-webkit-scrollbar-track{background:var(--gc-scrollbar-track-background-color, var(--theme-scroll-track-color, rgba(35, 31, 32, 0.2)))}:host::-webkit-scrollbar-thumb,::-webkit-scrollbar-thumb{background:var(--gc-scrollbar-thumb-background-color, var(--theme-scroll-thumb-color, rgba(35, 31, 32, 0.65)))}:host::-webkit-scrollbar-thumb:hover,::-webkit-scrollbar-thumb:hover{background:var(--gc-scrollbar-thumb-background-color-hover, var(--theme-scroll-thumb-color-hover, rgba(35, 31, 32, 0.8)))}:host::-webkit-scrollbar-corner,::-webkit-scrollbar-corner{background:rgba(0, 0, 0, 0)}:host(:focus),:host *:focus{outline:none}:host{-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;font-family:var(--gc-font-family, var(--theme-font-family, "Roboto", "Open Sans", "Segoe UI", "Tahoma", "sans-serif"));font-size:var(--gc-font-size, var(--theme-font-size, 14px));font-weight:400;color:var(--gc-font-color, var(--gc-font-color, var(--theme-font-color, #555555)));margin:var(--gc-margin, var(--theme-margin, 5px));display:inline-block;box-sizing:border-box}:host .user-select{-webkit-user-select:text;-khtml-user-select:text;-moz-user-select:text;-ms-user-select:text;-o-user-select:text;user-select:text}:host .text-link{color:var(--gc-link-color, var(--gc-link-color, var(--theme-link-color, #333333)));--gc-color:var(--gc-link-color, var(--gc-link-color, var(--theme-link-color, #333333)));--gc-text-decoration-hover:underline;--gc-cursor-hover:pointer}:host .text-link:not([disabled]):hover{text-decoration:underline;cursor:pointer}:host([hidden]){display:none !important}:host([readonly]) *{pointer-events:none}:host([disabled]) *{cursor:not-allowed}:host([caption]:not([caption=""])){margin-top:calc(var(--gc-margin, var(--theme-margin, 5px)) + var(--gc-caption-font-size, var(--theme-caption-font-size, 14px)) + 8px)}:host([caption]:not([caption=""])),:host([info-text]:not([info-text=""])){overflow:visible;position:relative}:host([caption=""][info-text]:not([info-text=""])),:host([info-text]:not([info-text=""]):not([caption])){margin-right:calc(var(--gc-margin, var(--theme-margin, 5px)) + 22px)}#elementWrapper{box-sizing:content-box;height:100%;width:100%;display:flex;align-items:center;min-height:inherit;max-height:inherit;min-width:inherit;max-width:inherit}.root-container{position:relative;display:flex;flex-direction:column;width:100%;height:100%;min-height:inherit;max-height:inherit;min-width:inherit;max-width:inherit}.root-container .header-container.top{top:var(--gc-header-container-top, calc(0px - 8px - var(--gc-caption-font-size, var(--theme-caption-font-size, 14px))));flex-direction:row}.root-container .header-container.side{right:-22px;flex-direction:column;height:inherit}.root-container .header-container{position:absolute;display:flex;align-items:center}.root-container .header-container .icon,.root-container .header-container gc-widget-icon{cursor:default;margin:auto;height:18px;width:18px;display:block;--gc-color:var(--gc-caption-info-color, var(--theme-caption-info-color, #98999b))}.root-container .header-container .caption{flex:1;cursor:default;white-space:nowrap;margin-right:2px;font-weight:var(--gc-caption-font-weight, var(--theme-caption-font-weight, 400));font-size:var(--gc-caption-font-size, var(--theme-caption-font-size, 14px));color:var(--gc-caption-font-color, var(--theme-caption-font-color, #999999))}.invisible{visibility:hidden}:host div.message{padding:5px 10px;margin:5px;white-space:normal}:host div.message .title-container{display:flex}:host div.message .spacer{flex:1;min-width:30px}:host div.message .title{font-size:var(--gc-sub-header-font-size, var(--theme-sub-header-font-size, 14px));font-weight:var(--gc-sub-header-font-weight, var(--theme-sub-header-font-weight, 200));text-transform:capitalize;border-radius:3px;padding:2px 5px;margin-left:-5px;color:#ffffff;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}:host div.message .title.error{background-color:#cc0000}:host div.message .title.warning{background-color:#f4b821}:host div.message .title.info{background-color:#98999b}:host div.message .dismiss{align-self:center;cursor:pointer;font-size:small;float:right;white-space:nowrap;margin-left:5px;color:var(--gc-link-color, var(--theme-link-color, #333333))}:host div.message .dismiss:hover{text-decoration:underline}:host div.message .content{margin-top:5px}:host div.message:not(:last-child){border-bottom:2px solid var(--gc-border-color, var(--theme-border-color, #e5e5e5))}:host{margin:0}:host #announcement_container{position:fixed;max-height:140px;background-color:#ffffe5;box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.14);color:#555555;overflow:auto}:host{position:relative;z-index:1000}';let l=class{constructor(o){e(this,o);this.cssPropertyChanged=t(this,"css-property-changed",7);this._logger=new a("gc-component-app-announcement");this._refresh=0;this.hidden=false}render(){return s.doRender(o("gc-widget-announcement",{id:"appUpdateAnnouncement",ref:e=>this.announcementEl=e}))}async componentDidRender(){if(!i.isCloud&&!i.isInDesigner&&!i.isInPreview){const e=await n.readJsonFile("installer/gallery.json");const t=await fetch("https://dev.ti.com/gallery/info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});try{const e=await t.json();this.fetchURL=e.dl[i.OS];const o=function(){window.tigalleryutil.getupdate(e.dl[i.OS]).then((function(){console.log("done")})).catch((function(e){console.log("fail",e)}))};window.updateGCApp=function(){if(window.tigalleryutil===undefined||window.tigalleryutil.getupdate===undefined){const e=document.createElement("script");e.src="https://dev.ti.com/gallery/assets/scripts/tigalleryutil.min.js";document.body.appendChild(e);e.onload=o}else{o()}};if(e.url!==null&&e.dl!==null&&this.fetchURL!==null){this.announcementEl.addAnnouncement({type:"info",message:`A new version ${e.version} of this application is available in the Gallery, click <a style='font-weight: bold;' onclick=nw.Shell.openExternal('${e.url}')>here</a> for details. <a style='font-weight: bold;' onclick=window.updateGCApp()> Update now</a> <div style='display: none;'>Update In Progress  <progress></progress></div>`,title:"UPDATE CHECKER - New Version Detected"})}}catch(e){this._logger.error(e.toString())}}}async setCSSProperty(e,t){t=t.trim();if(await this.getCSSProperty(e)!==t){this.el.style.setProperty(e,t);this.cssPropertyChanged.emit({name:e,value:t})}}async getCSSProperty(e){return getComputedStyle(this.el).getPropertyValue(e).trim()}async refresh(){this._refresh++}get el(){return r(this)}};l.style=c;export{l as gc_component_app_update_announcement};
//# sourceMappingURL=p-66aa0955.entry.js.map