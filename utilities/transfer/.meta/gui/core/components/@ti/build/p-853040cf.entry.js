import{r as t,c as e,h as o}from"./p-823ca21f.js";import{GcPromise as r}from"../gc-core-assets/lib/GcPromise";import{GcUtils as i}from"../gc-core-assets/lib/GcUtils";const n=':host::-webkit-scrollbar,::-webkit-scrollbar{width:var(--gc-scrollbar-width, var(--theme-scrollbar-width, 8px));height:var(--gc-scrollbar-width, var(--theme-scrollbar-width, 8px))}:host::-webkit-scrollbar-track,::-webkit-scrollbar-track{background:var(--gc-scrollbar-track-background-color, var(--theme-scroll-track-color, rgba(35, 31, 32, 0.2)))}:host::-webkit-scrollbar-thumb,::-webkit-scrollbar-thumb{background:var(--gc-scrollbar-thumb-background-color, var(--theme-scroll-thumb-color, rgba(35, 31, 32, 0.65)))}:host::-webkit-scrollbar-thumb:hover,::-webkit-scrollbar-thumb:hover{background:var(--gc-scrollbar-thumb-background-color-hover, var(--theme-scroll-thumb-color-hover, rgba(35, 31, 32, 0.8)))}:host::-webkit-scrollbar-corner,::-webkit-scrollbar-corner{background:rgba(0, 0, 0, 0)}:host(:focus),:host *:focus{outline:none}:host{-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;font-family:var(--gc-font-family, var(--theme-font-family, "Roboto", "Open Sans", "Segoe UI", "Tahoma", "sans-serif"));font-size:var(--gc-font-size, var(--theme-font-size, 14px));font-weight:400;color:var(--gc-font-color, var(--gc-font-color, var(--theme-font-color, #555555)));margin:var(--gc-margin, var(--theme-margin, 5px));display:inline-block;box-sizing:border-box}:host .user-select{-webkit-user-select:text;-khtml-user-select:text;-moz-user-select:text;-ms-user-select:text;-o-user-select:text;user-select:text}:host .text-link{color:var(--gc-link-color, var(--gc-link-color, var(--theme-link-color, #333333)));--gc-color:var(--gc-link-color, var(--gc-link-color, var(--theme-link-color, #333333)));--gc-text-decoration-hover:underline;--gc-cursor-hover:pointer}:host .text-link:not([disabled]):hover{text-decoration:underline;cursor:pointer}:host([hidden]){display:none !important}:host([readonly]) *{pointer-events:none}:host([disabled]) *{cursor:not-allowed}:host([caption]:not([caption=""])){margin-top:calc(var(--gc-margin, var(--theme-margin, 5px)) + var(--gc-caption-font-size, var(--theme-caption-font-size, 14px)) + 8px)}:host([caption]:not([caption=""])),:host([info-text]:not([info-text=""])){overflow:visible;position:relative}:host([caption=""][info-text]:not([info-text=""])),:host([info-text]:not([info-text=""]):not([caption])){margin-right:calc(var(--gc-margin, var(--theme-margin, 5px)) + 22px)}#elementWrapper{box-sizing:content-box;height:100%;width:100%;display:flex;align-items:center;min-height:inherit;max-height:inherit;min-width:inherit;max-width:inherit}.root-container{position:relative;display:flex;flex-direction:column;width:100%;height:100%;min-height:inherit;max-height:inherit;min-width:inherit;max-width:inherit}.root-container .header-container.top{top:var(--gc-header-container-top, calc(0px - 8px - var(--gc-caption-font-size, var(--theme-caption-font-size, 14px))));flex-direction:row}.root-container .header-container.side{right:-22px;flex-direction:column;height:inherit}.root-container .header-container{position:absolute;display:flex;align-items:center}.root-container .header-container .icon,.root-container .header-container gc-widget-icon{cursor:default;margin:auto;height:18px;width:18px;display:block;--gc-color:var(--gc-caption-info-color, var(--theme-caption-info-color, #98999b))}.root-container .header-container .caption{flex:1;cursor:default;white-space:nowrap;margin-right:2px;font-weight:var(--gc-caption-font-weight, var(--theme-caption-font-weight, 400));font-size:var(--gc-caption-font-size, var(--theme-caption-font-size, 14px));color:var(--gc-caption-font-color, var(--theme-caption-font-color, #999999))}.invisible{visibility:hidden}:host{display:none}:host input[type=file]{display:none}';let a=class{constructor(o){t(this,o);this.valueChanged=e(this,"value-changed",7);this.onClickHandler=t=>{t.stopPropagation()};this.onCancelHandler=t=>{t.stopPropagation();if(this.whenDialogClosed){this.whenDialogClosed.resolve(false);this.whenDialogClosed=undefined}};this.onChangeHandler=t=>{const e=t.currentTarget;if(e){this.value=e.value;this.valueChanged.emit({value:this.value});if(this.whenDialogClosed){this.whenDialogClosed.resolve(true);this.whenDialogClosed=undefined}}t.stopPropagation()}}render(){const t=i.parseArrayProperty(this.fileExtensions);const e=t&&t.map((t=>{if(t.startsWith("*.")){return t.substring("*".length)}else if(!t.startsWith(".")){return"."+t}return t})).join(",");return o("input",{type:"file",multiple:this.multiple,accept:e,ref:t=>this.fileInput=t,onClick:this.onClickHandler,onChange:this.onChangeHandler,"on-cancel":this.onCancelHandler})}uploadFile(t,e){return new Promise(((o,r)=>{const i=new FileReader;i.onload=()=>o(i.result);i.onerror=()=>r(i.error);if(e){i.readAsArrayBuffer(t)}else{i.readAsText(t)}}))}async browseAndLoad(t){this.fileInput.value="";if(!this.fileInput){throw new Error("File dialog is not ready.")}this.whenDialogClosed=r.defer();this.fileInput.click();if(await this.whenDialogClosed.promise){return await Promise.all(Array.from(this.fileInput.files).map((e=>this.uploadFile(e,t))))}return[]}async browseAndSave(t,e="",o="text/plain"){const r=document.createElement("a");r.setAttribute("href",`data:${o};charset=utf-8,${encodeURIComponent(t)}`);r.setAttribute("download",encodeURIComponent(e));r.style.display="none";document.body.appendChild(r);try{r.click()}finally{document.body.removeChild(r)}}};a.style=n;export{a as gc_widget_file_select_dialog};
//# sourceMappingURL=p-853040cf.entry.js.map