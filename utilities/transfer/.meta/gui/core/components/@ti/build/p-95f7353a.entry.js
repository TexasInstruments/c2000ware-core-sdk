import{r as t,c as i,h as e,g as o}from"./p-823ca21f.js";import{GcConsole as n}from"../gc-core-assets/lib/GcConsole";import{W as r}from"./p-b29896ef.js";import"../gc-core-assets/lib/GcUtils";import"../gc-core-assets/lib/GcFiles";import"../gc-core-assets/lib/GcLocalStorage";import"../gc-widget-message-dialog/lib/GcMessageDialog";const s=':host::-webkit-scrollbar,::-webkit-scrollbar{width:var(--gc-scrollbar-width, var(--theme-scrollbar-width, 8px));height:var(--gc-scrollbar-width, var(--theme-scrollbar-width, 8px))}:host::-webkit-scrollbar-track,::-webkit-scrollbar-track{background:var(--gc-scrollbar-track-background-color, var(--theme-scroll-track-color, rgba(35, 31, 32, 0.2)))}:host::-webkit-scrollbar-thumb,::-webkit-scrollbar-thumb{background:var(--gc-scrollbar-thumb-background-color, var(--theme-scroll-thumb-color, rgba(35, 31, 32, 0.65)))}:host::-webkit-scrollbar-thumb:hover,::-webkit-scrollbar-thumb:hover{background:var(--gc-scrollbar-thumb-background-color-hover, var(--theme-scroll-thumb-color-hover, rgba(35, 31, 32, 0.8)))}:host::-webkit-scrollbar-corner,::-webkit-scrollbar-corner{background:rgba(0, 0, 0, 0)}:host(:focus),:host *:focus{outline:none}:host{-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;font-family:var(--gc-font-family, var(--theme-font-family, "Roboto", "Open Sans", "Segoe UI", "Tahoma", "sans-serif"));font-size:var(--gc-font-size, var(--theme-font-size, 14px));font-weight:400;color:var(--gc-font-color, var(--gc-font-color, var(--theme-font-color, #555555)));margin:var(--gc-margin, var(--theme-margin, 5px));display:inline-block;box-sizing:border-box}:host .user-select{-webkit-user-select:text;-khtml-user-select:text;-moz-user-select:text;-ms-user-select:text;-o-user-select:text;user-select:text}:host .text-link{color:var(--gc-link-color, var(--gc-link-color, var(--theme-link-color, #333333)));--gc-color:var(--gc-link-color, var(--gc-link-color, var(--theme-link-color, #333333)));--gc-text-decoration-hover:underline;--gc-cursor-hover:pointer}:host .text-link:not([disabled]):hover{text-decoration:underline;cursor:pointer}:host([hidden]){display:none !important}:host([readonly]) *{pointer-events:none}:host([disabled]) *{cursor:not-allowed}:host([caption]:not([caption=""])){margin-top:calc(var(--gc-margin, var(--theme-margin, 5px)) + var(--gc-caption-font-size, var(--theme-caption-font-size, 14px)) + 8px)}:host([caption]:not([caption=""])),:host([info-text]:not([info-text=""])){overflow:visible;position:relative}:host([caption=""][info-text]:not([info-text=""])),:host([info-text]:not([info-text=""]):not([caption])){margin-right:calc(var(--gc-margin, var(--theme-margin, 5px)) + 22px)}#elementWrapper{box-sizing:content-box;height:100%;width:100%;display:flex;align-items:center;min-height:inherit;max-height:inherit;min-width:inherit;max-width:inherit}.root-container{position:relative;display:flex;flex-direction:column;width:100%;height:100%;min-height:inherit;max-height:inherit;min-width:inherit;max-width:inherit}.root-container .header-container.top{top:var(--gc-header-container-top, calc(0px - 8px - var(--gc-caption-font-size, var(--theme-caption-font-size, 14px))));flex-direction:row}.root-container .header-container.side{right:-22px;flex-direction:column;height:inherit}.root-container .header-container{position:absolute;display:flex;align-items:center}.root-container .header-container .icon,.root-container .header-container gc-widget-icon{cursor:default;margin:auto;height:18px;width:18px;display:block;--gc-color:var(--gc-caption-info-color, var(--theme-caption-info-color, #98999b))}.root-container .header-container .caption{flex:1;cursor:default;white-space:nowrap;margin-right:2px;font-weight:var(--gc-caption-font-weight, var(--theme-caption-font-weight, 400));font-size:var(--gc-caption-font-size, var(--theme-caption-font-size, 14px));color:var(--gc-caption-font-color, var(--theme-caption-font-color, #999999))}.invisible{visibility:hidden}:host div.message{padding:5px 10px;margin:5px;white-space:normal}:host div.message .title-container{display:flex}:host div.message .spacer{flex:1;min-width:30px}:host div.message .title{font-size:var(--gc-sub-header-font-size, var(--theme-sub-header-font-size, 14px));font-weight:var(--gc-sub-header-font-weight, var(--theme-sub-header-font-weight, 200));text-transform:capitalize;border-radius:3px;padding:2px 5px;margin-left:-5px;color:#ffffff;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}:host div.message .title.error{background-color:#cc0000}:host div.message .title.warning{background-color:#f4b821}:host div.message .title.info{background-color:#98999b}:host div.message .dismiss{align-self:center;cursor:pointer;font-size:small;float:right;white-space:nowrap;margin-left:5px;color:var(--gc-link-color, var(--theme-link-color, #333333))}:host div.message .dismiss:hover{text-decoration:underline}:host div.message .content{margin-top:5px}:host div.message:not(:last-child){border-bottom:2px solid var(--gc-border-color, var(--theme-border-color, #e5e5e5))}:host{display:flex;z-index:1}:host #elementWrapper{position:relative}:host gc-widget-icon{cursor:pointer;margin:0;--gc-color:#f7f7f7}:host #notification_container{position:absolute;margin:8px 0 8px -2px;background-color:#ffffe5;color:#555555;box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.14);width:max-content;transition:visibility 0.5s ease;opacity:0;visibility:hidden}:host #notification_container.visible{opacity:1;visibility:visible}:host #notification_container #notification_container_wrapper{max-height:250px;max-width:300px;overflow:auto}:host #notification_container:after{content:" ";position:absolute;transform:rotate(180deg);top:-16px;left:6px;height:0;width:0;border:solid transparent;border-left-color:#ffffe5;border-width:8px;transform:rotate(-90deg)}:host #notification_container:before{z-index:-1;content:" ";position:absolute;transform:rotate(45deg);top:-5px;bottom:0px;left:6px;width:16px;height:16px;transform:rotate(45deg);box-shadow:0px 0px 1px 1px rgba(0, 0, 0, 0.05)}:host #notification_container.right-align{margin:8px -2px 8px 0}:host #notification_container.right-align:after,:host #notification_container.right-align:before{left:auto;right:6px}:host #notification_container.bottom-align::after{transform:rotate(90deg);top:calc(100% - 0px)}:host #notification_container.bottom-align::before{transform:rotate(45deg);box-shadow:0px 0px 2px 1px rgba(0, 0, 0, 0.1);top:calc(100% - 11px)}';const a=new n("gc-widget-notification");const c=5e3;const h=(()=>{let t=0;return()=>t++})();let l=class{constructor(e){t(this,e);this.notificationAdded=i(this,"notification-added",7);this.notificationRemoved=i(this,"notification-removed",7);this.announcementAdded=i(this,"announcement-added",7);this.announcementRemoved=i(this,"announcement-removed",7);this.cssPropertyChanged=i(this,"css-property-changed",7);this.notificationHidden=true;this.notifications=[];this.handleNotificationMouseEnter=()=>{a.debug("Notification mouse enter");if(!this.stayOpened){this.clearCloseMenuTimer()}};this.handleNotificationMouseLeave=()=>{a.debug("Notification mouse leave");if(!this.stayOpened&&!this.notificationHidden){this.setCloseMenuTimer()}};this._refresh=0;this.hidden=false}async addNotification(t){const i=h();this.notifications=[{...t,handler:i},...this.notifications];if(this.notificationTimeout&&this.notificationTimeout<0){this.openNotificationMenu(true)}else this.openNotificationMenu();this.notificationAdded.emit({handler:i});return i}async removeNotification(t){const i=this.notifications.filter((i=>i.handler!==t));if(i.length<this.notifications.length){this.notifications=i;if(this.notifications.length===0){this.closeNotificationMenu(true)}this.notificationRemoved.emit({handler:t})}}async clearNotifications(){this.notifications.forEach((t=>this.removeAnnouncement(t.handler)))}async addAnnouncement(t){return this.announcementEl?.addAnnouncement(t)}async removeAnnouncement(t){return this.announcementEl?.removeAnnouncement(t)}async clearAnnouncements(){return this.announcementEl?.clearAnnouncements()}async getAnnouncementClientRect(){return this.announcementEl?.getAnnouncementClientRect()}render(){const t=[e("gc-widget-announcement",{ref:t=>this.announcementEl=t})];if(this.notifications.length>0){t.push(e("gc-widget-icon",{part:"notification-icon",ref:t=>this.notificationIconEl=t,tooltip:this.tooltip,icon:"action:circle_notifications",appearance:"custom",onClick:()=>this.notificationHidden?this.openNotificationMenu(true):this.closeNotificationMenu(true),onMouseEnter:this.handleNotificationMouseEnter,onMouseLeave:this.handleNotificationMouseLeave}),e("div",{id:"notification_container",ref:t=>this.notificationContainerEl=t,hidden:this.notificationHidden,onMouseEnter:this.handleNotificationMouseEnter,onMouseLeave:this.handleNotificationMouseLeave},e("div",{id:"notification_container_wrapper"},this.notifications.map((t=>e("div",{part:"notification-message",class:"message"},e("div",{class:"title-container"},e("div",{class:`title ${t.type}`},t.title),e("div",{class:"spacer"}),e("div",{class:"dismiss",onClick:()=>this.onDismissNotificationClick(t)},"(dismiss)")),e("div",{class:"content",innerHTML:t.message})))))))}return r.doRender(t)}componentDidRender(){if(!this.notificationHidden){this.updateNotificationMenuPosition()}this.announcementEl?.setParentContainer(this.getAnchor())}componentDidLoad(){window.addEventListener("resize",(()=>{this.closeNotificationMenu();this.stayOpened=false}))}onDismissNotificationClick({handler:t}){a.debug(`Dismiss notification message clicked handler=${t}`);this.removeNotification(t)}clearCloseMenuTimer(){if(this.closeNotificationTimer!==undefined){a.debug("clear menu timer");window.clearTimeout(this.closeNotificationTimer);this.closeNotificationTimer=undefined}}setCloseMenuTimer(){a.debug("set menu timer");this.clearCloseMenuTimer();this.closeNotificationTimer=window.setTimeout((()=>this.closeNotificationMenu()),this.notificationTimeout?this.notificationTimeout*1e3:c)}openNotificationMenu(t){this.notificationHidden=false;if(this.stayOpened||t){this.clearCloseMenuTimer();this.stayOpened=this.stayOpened||t}else{this.setCloseMenuTimer()}}closeNotificationMenu(t){if(this.notificationContainerEl){this.notificationContainerEl.classList.remove("visible")}this.clearCloseMenuTimer();this.notificationHidden=true;if(t){this.stayOpened=false}}updateNotificationMenuPosition(){if(this.notificationIconEl&&this.notificationContainerEl){const t=this.notificationIconEl.getBoundingClientRect();const i=(t.left+t.right)/2;const e=window.innerWidth/2;const o=(t.top+t.bottom)/2;const n=window.innerHeight/2;this.notificationContainerEl.className="visible";let r="";if(i>e){r+="left:auto;right:0;";this.notificationContainerEl.classList.add("right-align")}else{r+="left:0;right:auto;";this.notificationContainerEl.classList.add("left-align")}if(o<n){r+=`top:${t.height}px;bottom:auto;`;this.notificationContainerEl.classList.add("top-align")}else{r+=`top:auto;bottom:${t.height}px;`;this.notificationContainerEl.classList.add("bottom-align")}this.notificationContainerEl.setAttribute("style",r)}}getAnchor(){return this.anchorId&&this.anchorId!=="elementWrapper"?this.el.parentElement.getRootNode().querySelector(`#${this.anchorId}`)||this.el.parentElement.querySelector(`#${this.anchorId}`)||document.querySelector(`#${this.anchorId}`):this.el.parentElement}async setCSSProperty(t,i){i=i.trim();if(await this.getCSSProperty(t)!==i){this.el.style.setProperty(t,i);this.cssPropertyChanged.emit({name:t,value:i})}}async getCSSProperty(t){return getComputedStyle(this.el).getPropertyValue(t).trim()}async refresh(){this._refresh++}get el(){return o(this)}};l.style=s;export{l as gc_widget_notification};
//# sourceMappingURL=p-95f7353a.entry.js.map