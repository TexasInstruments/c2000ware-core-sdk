import{r as s,g as t}from"./p-823ca21f.js";import{GcPromise as e}from"../gc-core-assets/lib/GcPromise";import{GcUtils as i}from"../gc-core-assets/lib/GcUtils";import{ParentRegistry as a}from"../gc-widget-base/lib/GcWidget";import{G as r}from"./p-ac10ab7b.js";import"./p-b29896ef.js";import"../gc-core-assets/lib/GcFiles";import"../gc-core-assets/lib/GcConsole";import"../gc-core-assets/lib/GcLocalStorage";import"../gc-widget-message-dialog/lib/GcMessageDialog";let h=class{constructor(t){s(this,t);this.id="";this.series={type:"bar",x:[],y:[],marker:{line:{}},line:{}};this.parentRegistry=new a(r.widgetType);this.childIndex=-1;this.valuesStreamingDataListener=s=>{if(Array.isArray(s[0])){const t=i.transposeMatrix(s);this.series.x=t[0];this.series.y=t[1]}this.fireData();return};this.deferredWidgetReady=e.defer();this.capacity=200;this.legend="auto"}get sortingOrder(){return a.getChildElementIndex(this.el)}barModeHandler(s){this.relayout({barmode:s})}valuesHandler(s){this.valuesStreamingDataListener(s)}showLegendHandler(s){this.restyle({showlegend:s})}legendNameHandler(s){this.restyle({name:s})}fireData(){this.parentRegistry.parent?.replot()}async waitForWidgetReady(){return this.deferredWidgetReady.promise}async restyle(s){if(!this.parentRegistry.parent){r.mergeRecords(r.flattenRecord(s),this.series)}else{this.parentRegistry.parent.restyle(this,s)}}async relayout(s){if(this.parentRegistry.parent){this.parentRegistry.parent.relayout(s)}}connectedCallback(){this.el["barStreamingDataListener"]=this.valuesStreamingDataListener;if(this.deferredWidgetReady.promise.isPending){this.deferredWidgetReady.resolve()}this.id=this.el.id;this.parentRegistry.register(this.el.parentElement,this)}disconnectedCallback(){this.parentRegistry.unregister(this)}async componentWillLoad(){if(this.values){this.valuesStreamingDataListener(this.values)}this.series.name=this.legendName??this.el.id;this.series.showlegend=this.legend==="hide"?false:this.legend==="show"?true:undefined;this.el["series"]=this.series}get el(){return t(this)}static get watchers(){return{barMode:["barModeHandler"],values:["valuesHandler"],legend:["showLegendHandler"],legendName:["legendNameHandler"]}}};export{h as gc_widget_plot_data_bargraph};
//# sourceMappingURL=p-b762769e.entry.js.map